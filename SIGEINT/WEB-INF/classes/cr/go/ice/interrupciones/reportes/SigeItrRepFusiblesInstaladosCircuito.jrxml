<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="SigeItrRepFusiblesInstaladosCircuito" pageWidth="595" pageHeight="842" whenNoDataType="AllSectionsNoDetail" columnWidth="535" leftMargin="30" rightMargin="30" topMargin="20" bottomMargin="20" uuid="a1f6fda7-baaa-42be-8d89-449f86919a13">
	<property name="ireport.scriptlethandling" value="0"/>
	<property name="ireport.encoding" value="UTF-8"/>
	<property name="ireport.zoom" value="5.0"/>
	<property name="ireport.x" value="1614"/>
	<property name="ireport.y" value="104"/>
	<import value="net.sf.jasperreports.engine.*"/>
	<import value="java.util.*"/>
	<import value="net.sf.jasperreports.engine.data.*"/>
	<parameter name="fechaInicio" class="java.lang.String"/>
	<parameter name="fechaFinal" class="java.lang.String"/>
	<parameter name="tipoFusible" class="java.lang.Integer" isForPrompting="false"/>
	<parameter name="subregion" class="java.lang.Integer">
		<defaultValueExpression><![CDATA[new Integer(0)]]></defaultValueExpression>
	</parameter>
	<parameter name="itemsSTR" class="java.lang.String"/>
	<parameter name="cantidadItems" class="java.lang.Integer"/>
	<parameter name="SUBREPORT_DIR" class="java.lang.String">
		<defaultValueExpression><![CDATA[""]]></defaultValueExpression>
	</parameter>
	<parameter name="region" class="java.lang.Integer">
		<defaultValueExpression><![CDATA[new Integer(0)]]></defaultValueExpression>
	</parameter>
	<parameter name="subestacion" class="java.lang.Integer">
		<defaultValueExpression><![CDATA[new Integer(0)]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[SELECT
COUNT(eve01m.CIR),
eve04m.TIPO_INSTALA,
eve04m.CAPACIDAD_INSTALA,
eve01c.NOM_CIRCUITO,
eve01m.CIR

FROM eve01m
INNER JOIN eve01c ON (eve01m.SUB = eve01c.SUB AND eve01m.CIR = eve01c.CIR)
INNER JOIN eve04m ON (eve01m.AA = eve04m.AA) AND (eve01m.COD_OFICINA = eve04m.COD_OFICINA) AND (eve01m.NUMINTERRUP = eve04m.NUMINTERRUP)

WHERE (TO_DATE(eve01m.FECINI) >= TO_DATE($P{fechaInicio}, 'dd/mm/yyyy') )
  AND (TO_DATE(eve01m.FECFIN) <= TO_DATE($P{fechaFinal}, 'dd/mm/yyyy') )
  AND (eve01m.REG = $P{region})
  AND (eve01m.SUBREGION = $P{subregion})
  AND (eve01m.SUB = $P{subestacion})
  AND (eve01m.CIR IN ($P!{itemsSTR}) OR $P{cantidadItems} = 0)

GROUP BY eve01m.CIR, eve04m.TIPO_INSTALA, eve04m.CAPACIDAD_INSTALA, eve01c.NOM_CIRCUITO
ORDER BY eve01m.CIR, eve04m.TIPO_INSTALA, eve04m.CAPACIDAD_INSTALA]]>
	</queryString>
	<field name="COUNT(EVE01M.CIR)" class="java.math.BigDecimal"/>
	<field name="TIPO_INSTALA" class="java.math.BigDecimal"/>
	<field name="CAPACIDAD_INSTALA" class="java.math.BigDecimal"/>
	<field name="NOM_CIRCUITO" class="java.lang.String"/>
	<field name="CIR" class="java.math.BigDecimal"/>
	<group name="nivel">
		<groupExpression><![CDATA[new Integer($P{region}.intValue() + $P{subregion}.intValue() + $F{CIR}.intValue())]]></groupExpression>
		<groupHeader>
			<band height="36" splitType="Stretch">
				<textField isBlankWhenNull="false">
					<reportElement key="textField-19" x="0" y="22" width="265" height="12" uuid="675ba368-00c5-44ff-9ac0-526a301e3561"/>
					<box>
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement>
						<font size="8" isBold="true" pdfFontName="Helvetica-Bold"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{CIR} != null ?
"Subregion: " + $P{region} + " - " + $P{subregion} + " - " + $F{CIR} + " " + $F{NOM_CIRCUITO}
: "No hay información para generar el reporte"]]></textFieldExpression>
				</textField>
				<line direction="BottomUp">
					<reportElement key="line-1" x="174" y="35" width="361" height="1" uuid="e26ffe60-b0ae-4df1-8d9c-2954caa5d5cc"/>
				</line>
				<textField isBlankWhenNull="false">
					<reportElement key="textField-20" x="265" y="22" width="90" height="12" uuid="8ddf7163-ee30-4a12-813d-f023fe8805e8"/>
					<box>
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement>
						<font size="8" isBold="true" pdfFontName="Helvetica-Bold"/>
					</textElement>
					<textFieldExpression><![CDATA["Tipo "]]></textFieldExpression>
				</textField>
				<textField isBlankWhenNull="false">
					<reportElement key="textField-21" x="355" y="22" width="90" height="12" uuid="fbe000c6-89de-4d1c-b609-88a950869fc7"/>
					<box>
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement>
						<font size="8" isBold="true" pdfFontName="Helvetica-Bold"/>
					</textElement>
					<textFieldExpression><![CDATA["Capacidad "]]></textFieldExpression>
				</textField>
				<textField isBlankWhenNull="false">
					<reportElement key="textField-22" x="445" y="22" width="90" height="12" uuid="9d69a4c2-79c0-4522-96d7-a0281120c0f9"/>
					<box>
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement>
						<font size="8" isBold="true" pdfFontName="Helvetica-Bold"/>
					</textElement>
					<textFieldExpression><![CDATA["Cantidad "]]></textFieldExpression>
				</textField>
			</band>
		</groupHeader>
		<groupFooter>
			<band height="18" splitType="Stretch">
				<line direction="BottomUp">
					<reportElement key="line-2" x="174" y="3" width="361" height="1" uuid="71b61164-1e6c-4a89-bd05-a0e1fbbbbe18"/>
				</line>
				<subreport isUsingCache="true">
					<reportElement key="subreport-1" x="0" y="4" width="535" height="14" uuid="0547fd4e-78f3-441a-8e6c-d20cc9c9c51b"/>
					<subreportParameter name="sql">
						<subreportParameterExpression><![CDATA[new String("SELECT COUNT(eve01m.CIR) AS CONTADOR,eve04m.CAPACIDAD_INSTALA AS CAPACIDAD,eve01m.CIR AS NIVELRED FROM eve01m INNER JOIN eve04m ON (eve01m.AA = eve04m.AA) AND (eve01m.COD_OFICINA = eve04m.COD_OFICINA) AND (eve01m.NUMINTERRUP = eve04m.NUMINTERRUP) WHERE (TO_DATE(eve01m.FECINI) >= TO_DATE('"+ $P{fechaInicio}+"', 'dd/mm/yyyy') )   AND (TO_DATE(eve01m.FECFIN) <= TO_DATE('"+ $P{fechaFinal}+"', 'dd/mm/yyyy') )  AND (eve01m.REG = "+ $P{region}+") AND (eve01m.SUBREGION = "+ $P{subregion}+") AND (eve01m.SUB = "+ $P{subestacion}+") AND (eve01m.CIR IN ("+ $F{CIR}+") OR 1 = 0) GROUP BY eve01m.CIR, eve04m.CAPACIDAD_INSTALA ORDER BY eve01m.CIR, eve04m.CAPACIDAD_INSTALA")]]></subreportParameterExpression>
					</subreportParameter>
					<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
					<subreportExpression><![CDATA[$P{SUBREPORT_DIR} + "SigeItrRepFusiblesInstaladosRetiradosTotales.jasper"]]></subreportExpression>
				</subreport>
			</band>
		</groupFooter>
	</group>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band splitType="Stretch"/>
	</title>
	<pageHeader>
		<band height="36" splitType="Stretch">
			<textField pattern="" isBlankWhenNull="false">
				<reportElement key="textField-1" x="355" y="12" width="180" height="12" uuid="2d3eb73e-499e-46b4-a702-7cdbed2d27d9"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement>
					<font fontName="Arial" size="9" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<textFieldExpression><![CDATA["Fecha: "+new java.text.SimpleDateFormat("dd/MM/yyyy HH:mm").format(new java.util.Date())]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="false">
				<reportElement key="textField-2" x="355" y="0" width="90" height="12" uuid="0d6ecc66-c84e-4ce2-abcc-2d97bbb802f6"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right">
					<font fontName="Arial" size="9" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<textFieldExpression><![CDATA["Página: "+$V{PAGE_NUMBER}+ " de "]]></textFieldExpression>
			</textField>
			<textField evaluationTime="Report" isBlankWhenNull="false">
				<reportElement key="textField-3" x="445" y="0" width="90" height="12" uuid="67f3f67a-d01f-4137-9b44-02a13ed00efa"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Left">
					<font fontName="Arial" size="9" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="false">
				<reportElement key="textField-6" x="0" y="24" width="535" height="12" uuid="5de61d8c-c5f7-4412-b749-cbd885c70a5f"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center">
					<font fontName="Arial" size="9" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<textFieldExpression><![CDATA["Del: " + $P{fechaInicio} + " Al: " + $P{fechaFinal}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement key="staticText-1" x="0" y="0" width="130" height="12" uuid="fd81ead5-843a-43da-9ebc-0b1d30881cd2"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement>
					<font fontName="Arial" size="9" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<text><![CDATA[ICE - UEN Servicio al Cliente]]></text>
			</staticText>
			<staticText>
				<reportElement key="staticText-3" x="0" y="12" width="130" height="12" uuid="d2965c58-47bb-456a-ac5d-88568e97dddb"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement>
					<font fontName="Arial" size="9" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<text><![CDATA[]]></text>
			</staticText>
			<textField isBlankWhenNull="false">
				<reportElement key="textField-17" x="130" y="0" width="225" height="12" uuid="ce3981a6-3273-4f97-ab4d-937c9cc74e88"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center">
					<font size="9" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<textFieldExpression><![CDATA["Fusibles Instalados"]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="false">
				<reportElement key="textField-24" x="130" y="12" width="225" height="12" uuid="a8b89f67-e1e8-4d88-a88b-82d9af4a1f7b"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center">
					<font size="9" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<textFieldExpression><![CDATA["A nivel de Circuito "]]></textFieldExpression>
			</textField>
		</band>
	</pageHeader>
	<columnHeader>
		<band splitType="Stretch"/>
	</columnHeader>
	<detail>
		<band height="16" splitType="Stretch">
			<textField pattern="##0" isBlankWhenNull="true">
				<reportElement key="textField" x="265" y="1" width="90" height="15" uuid="b167c253-95ab-4a43-9a78-80b6cdfef91e"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textFieldExpression><![CDATA[$F{TIPO_INSTALA}.intValue() == 0 ? "K" : ($F{TIPO_INSTALA}.intValue() == 1 ? "T" : ($F{TIPO_INSTALA}.intValue() == 2 ? "H" : ($F{TIPO_INSTALA}.intValue() == 3 ? "SF" : "LC")))]]></textFieldExpression>
			</textField>
			<textField pattern="##0" isBlankWhenNull="true">
				<reportElement key="textField" x="355" y="1" width="90" height="15" uuid="40e6425b-9162-4778-afa5-d9e0b15e66aa"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textFieldExpression><![CDATA[$F{CAPACIDAD_INSTALA}]]></textFieldExpression>
			</textField>
			<textField pattern="##0.00" isBlankWhenNull="true">
				<reportElement key="textField" x="445" y="1" width="90" height="15" uuid="796d9afa-9a87-4098-bad2-f79401d92a8a"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textFieldExpression><![CDATA[$F{COUNT(EVE01M.CIR)}.toString() + " c/u"]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<columnFooter>
		<band splitType="Stretch"/>
	</columnFooter>
	<pageFooter>
		<band splitType="Stretch"/>
	</pageFooter>
	<summary>
		<band height="20" splitType="Stretch">
			<subreport isUsingCache="true">
				<reportElement key="subreport-2" x="0" y="5" width="535" height="14" uuid="5803b38f-3ef3-4a76-b27e-8313b475aeb9"/>
				<subreportParameter name="sql">
					<subreportParameterExpression><![CDATA[new String("SELECT COUNT(*) AS CONTADOR,eve04m.CAPACIDAD_INSTALA AS CAPACIDAD, 1 AS NIVELRED FROM eve01m INNER JOIN eve04m ON (eve01m.AA = eve04m.AA) AND (eve01m.COD_OFICINA = eve04m.COD_OFICINA) AND (eve01m.NUMINTERRUP = eve04m.NUMINTERRUP) WHERE (TO_DATE(eve01m.FECINI) >= TO_DATE('"+ $P{fechaInicio}+"', 'dd/mm/yyyy') )   AND (TO_DATE(eve01m.FECFIN) <= TO_DATE('"+ $P{fechaFinal}+"', 'dd/mm/yyyy') )  AND (eve01m.REG = "+ $P{region}+")  AND (eve01m.SUBREGION = "+ $P{subregion}+") AND (eve01m.SUB = "+ $P{subestacion}+") AND (eve01m.CIR IN ("+ $P{itemsSTR}+") OR "+ $P{cantidadItems}+" = 0) GROUP BY eve04m.CAPACIDAD_INSTALA ORDER BY eve04m.CAPACIDAD_INSTALA")]]></subreportParameterExpression>
				</subreportParameter>
				<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
				<subreportExpression><![CDATA[$P{SUBREPORT_DIR} + "SigeItrRepFusiblesInstaladosRetiradosTotales.jasper"]]></subreportExpression>
			</subreport>
		</band>
	</summary>
</jasperReport>
