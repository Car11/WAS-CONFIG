<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="SigeItrRepFusiblesRetiradosRegion" pageWidth="595" pageHeight="842" whenNoDataType="AllSectionsNoDetail" columnWidth="535" leftMargin="30" rightMargin="30" topMargin="20" bottomMargin="20" uuid="fdb0f641-b953-4ac8-875b-7d7e7bd64303">
	<property name="ireport.scriptlethandling" value="0"/>
	<property name="ireport.encoding" value="UTF-8"/>
	<property name="ireport.zoom" value="3.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<import value="net.sf.jasperreports.engine.*"/>
	<import value="java.util.*"/>
	<import value="net.sf.jasperreports.engine.data.*"/>
	<parameter name="fechaInicio" class="java.lang.String"/>
	<parameter name="fechaFinal" class="java.lang.String"/>
	<parameter name="tipoFusible" class="java.lang.Integer" isForPrompting="false"/>
	<parameter name="region" class="java.lang.Integer" isForPrompting="false"/>
	<parameter name="itemsSTR" class="java.lang.String"/>
	<parameter name="cantidadItems" class="java.lang.Integer"/>
	<parameter name="SUBREPORT_DIR" class="java.lang.String">
		<defaultValueExpression><![CDATA[""]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[SELECT
COUNT(eve01m.REG),
eve04m.TIPO_RETIRA,
eve04m.CAPACIDAD_RETIRA,
eve05c.NOM_REGION,
eve01m.REG

FROM eve01m
INNER JOIN eve05c ON (eve01m.REG = eve05c.REG)
INNER JOIN eve04m ON (eve01m.AA = eve04m.AA) AND (eve01m.COD_OFICINA = eve04m.COD_OFICINA) AND (eve01m.NUMINTERRUP = eve04m.NUMINTERRUP)

WHERE (TO_DATE(eve01m.FECINI) >= TO_DATE($P{fechaInicio}, 'dd/mm/yyyy') )
  AND (TO_DATE(eve01m.FECFIN) <= TO_DATE($P{fechaFinal}, 'dd/mm/yyyy') )
  AND (eve01m.reg IN ($P!{itemsSTR}) OR $P{cantidadItems} = 0)

GROUP BY eve01m.REG, eve04m.TIPO_RETIRA, eve04m.CAPACIDAD_RETIRA, eve05c.NOM_REGION
ORDER BY eve01m.REG, eve04m.TIPO_RETIRA, eve04m.CAPACIDAD_RETIRA]]>
	</queryString>
	<field name="COUNT(EVE01M.REG)" class="java.math.BigDecimal"/>
	<field name="TIPO_RETIRA" class="java.math.BigDecimal"/>
	<field name="CAPACIDAD_RETIRA" class="java.math.BigDecimal"/>
	<field name="NOM_REGION" class="java.lang.String"/>
	<field name="REG" class="java.math.BigDecimal"/>
	<group name="nivel">
		<groupExpression><![CDATA[$F{REG}]]></groupExpression>
		<groupHeader>
			<band height="36" splitType="Stretch">
				<textField isBlankWhenNull="false">
					<reportElement key="textField-19" x="0" y="22" width="239" height="13" uuid="d417f76b-593c-4089-b3cf-82bf5e689222"/>
					<box>
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement>
						<font size="8" isBold="true" pdfFontName="Helvetica-Bold"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{REG} != null ?
"Región: " + $F{REG} + " " + $F{NOM_REGION}
: "No hay información para generar el reporte"]]></textFieldExpression>
				</textField>
				<line direction="BottomUp">
					<reportElement key="line-1" x="174" y="35" width="361" height="1" uuid="7a6e97c2-2b91-4028-b013-fb329db638e0"/>
				</line>
				<textField isBlankWhenNull="false">
					<reportElement key="textField-20" x="239" y="22" width="116" height="13" uuid="d0dab268-9404-4499-92a6-11f7876160b0"/>
					<box>
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement>
						<font size="8" isBold="true" pdfFontName="Helvetica-Bold"/>
					</textElement>
					<textFieldExpression><![CDATA["Tipo "]]></textFieldExpression>
				</textField>
				<textField isBlankWhenNull="false">
					<reportElement key="textField-21" x="355" y="22" width="90" height="13" uuid="efb61e5f-69ed-424a-964d-be5cd4a3f886"/>
					<box>
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement>
						<font size="8" isBold="true" pdfFontName="Helvetica-Bold"/>
					</textElement>
					<textFieldExpression><![CDATA["Capacidad "]]></textFieldExpression>
				</textField>
				<textField isBlankWhenNull="false">
					<reportElement key="textField-22" x="445" y="22" width="90" height="13" uuid="4e3d30a3-5c97-4ca8-a2e5-26bf69eca237"/>
					<box>
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement>
						<font size="8" isBold="true" pdfFontName="Helvetica-Bold"/>
					</textElement>
					<textFieldExpression><![CDATA["Cantidad "]]></textFieldExpression>
				</textField>
			</band>
		</groupHeader>
		<groupFooter>
			<band height="18" splitType="Stretch">
				<line direction="BottomUp">
					<reportElement key="line-2" x="174" y="0" width="361" height="1" uuid="a616d98c-83a5-494c-952a-f13f4ee7a0dd"/>
				</line>
				<subreport isUsingCache="true">
					<reportElement key="subreport-1" x="0" y="0" width="535" height="18" uuid="4e643e41-a9fd-4f37-a62a-7ee0386ec97f"/>
					<subreportParameter name="sql">
						<subreportParameterExpression><![CDATA[new String("SELECT COUNT(eve01m.REG) AS CONTADOR,eve04m.CAPACIDAD_RETIRA AS CAPACIDAD,eve01m.REG AS NIVELRED FROM eve01m INNER JOIN eve04m ON (eve01m.AA = eve04m.AA) AND (eve01m.COD_OFICINA = eve04m.COD_OFICINA) AND (eve01m.NUMINTERRUP = eve04m.NUMINTERRUP) WHERE (TO_DATE(eve01m.FECINI) >= TO_DATE('"+ $P{fechaInicio}+"', 'dd/mm/yyyy') )   AND (TO_DATE(eve01m.FECFIN) <= TO_DATE('"+ $P{fechaFinal}+"', 'dd/mm/yyyy') )   AND (eve01m.reg IN ("+ $F{REG}+") OR 1 = 0) GROUP BY eve01m.REG, eve04m.CAPACIDAD_RETIRA ORDER BY eve01m.REG, eve04m.CAPACIDAD_RETIRA")]]></subreportParameterExpression>
					</subreportParameter>
					<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
					<subreportExpression><![CDATA[$P{SUBREPORT_DIR} + "SigeItrRepFusiblesInstaladosRetiradosTotales.jasper"]]></subreportExpression>
				</subreport>
			</band>
		</groupFooter>
	</group>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band splitType="Stretch"/>
	</title>
	<pageHeader>
		<band height="36" splitType="Stretch">
			<textField pattern="" isBlankWhenNull="false">
				<reportElement key="textField-1" x="355" y="12" width="180" height="12" uuid="881e67b5-a4cf-4845-a0ea-7ca3c874bb80"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement>
					<font fontName="Arial" size="9" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<textFieldExpression><![CDATA["Fecha: "+new java.text.SimpleDateFormat("dd/MM/yyyy HH:mm").format(new java.util.Date())]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="false">
				<reportElement key="textField-2" x="355" y="0" width="90" height="12" uuid="0fb43a67-8583-4a65-ae33-616fc864c8d4"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right">
					<font fontName="Arial" size="9" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<textFieldExpression><![CDATA["Página: "+$V{PAGE_NUMBER}+ " de "]]></textFieldExpression>
			</textField>
			<textField evaluationTime="Report" isBlankWhenNull="false">
				<reportElement key="textField-3" x="445" y="0" width="90" height="12" uuid="597cecee-25b8-492a-b0b0-3682aeb25660"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Left">
					<font fontName="Arial" size="9" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="false">
				<reportElement key="textField-6" x="0" y="24" width="535" height="12" uuid="9e4d825f-4037-45a1-996e-d650c6662afe"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center">
					<font fontName="Arial" size="9" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<textFieldExpression><![CDATA["Del: " + $P{fechaInicio} + " Al: " + $P{fechaFinal}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement key="staticText-1" x="0" y="0" width="239" height="12" uuid="cd09fae0-70af-4ee6-a426-74abe3eae997"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement>
					<font fontName="Arial" size="9" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<text><![CDATA[ICE - UEN Servicio al Cliente]]></text>
			</staticText>
			<staticText>
				<reportElement key="staticText-3" x="0" y="12" width="239" height="12" uuid="dcd458b3-82db-4827-9096-4c15bd1ec79a"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement>
					<font fontName="Arial" size="9" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<text><![CDATA[]]></text>
			</staticText>
			<textField isBlankWhenNull="false">
				<reportElement key="textField-17" x="239" y="0" width="116" height="12" uuid="023bc9ac-7e01-4873-a94a-3de64505a4ab"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center">
					<font size="9" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<textFieldExpression><![CDATA["Fusibles Retirados"]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="false">
				<reportElement key="textField-24" x="239" y="12" width="116" height="12" uuid="121c41bb-ed8b-44f2-b7bc-34c20005d61a"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center">
					<font size="9" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<textFieldExpression><![CDATA["A nivel de Región "]]></textFieldExpression>
			</textField>
		</band>
	</pageHeader>
	<columnHeader>
		<band splitType="Stretch"/>
	</columnHeader>
	<detail>
		<band height="16" splitType="Stretch">
			<textField pattern="##0" isBlankWhenNull="true">
				<reportElement key="textField" x="239" y="0" width="116" height="16" uuid="d330f47f-5639-4ea3-a17a-dac4faaaaab7"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textFieldExpression><![CDATA[$F{TIPO_RETIRA}.intValue() == 0 ? "K" : ($F{TIPO_RETIRA}.intValue() == 1 ? "T" : ($F{TIPO_RETIRA}.intValue() == 2 ? "H" : ($F{TIPO_RETIRA}.intValue() == 3 ? "SF" : "LC")))]]></textFieldExpression>
			</textField>
			<textField pattern="##0" isBlankWhenNull="true">
				<reportElement key="textField" x="355" y="0" width="90" height="16" uuid="2a17e9e8-8131-4922-b66b-3eadd0addf6a"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textFieldExpression><![CDATA[$F{CAPACIDAD_RETIRA}]]></textFieldExpression>
			</textField>
			<textField pattern="##0.00" isBlankWhenNull="true">
				<reportElement key="textField" x="445" y="0" width="90" height="16" uuid="393dc641-2dc8-4210-a4d7-1f0bfd0d6581"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textFieldExpression><![CDATA[$F{COUNT(EVE01M.REG)}.toString() + " c/u"]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<columnFooter>
		<band splitType="Stretch"/>
	</columnFooter>
	<pageFooter>
		<band splitType="Stretch"/>
	</pageFooter>
	<summary>
		<band height="20" splitType="Stretch">
			<subreport isUsingCache="true">
				<reportElement key="subreport-2" x="0" y="0" width="535" height="20" uuid="863fcfbb-96e1-4877-8a22-e6e99c10e90b"/>
				<subreportParameter name="sql">
					<subreportParameterExpression><![CDATA[new String("SELECT COUNT(*) AS CONTADOR,eve04m.CAPACIDAD_RETIRA AS CAPACIDAD, 1 AS NIVELRED FROM eve01m INNER JOIN eve04m ON (eve01m.AA = eve04m.AA) AND (eve01m.COD_OFICINA = eve04m.COD_OFICINA) AND (eve01m.NUMINTERRUP = eve04m.NUMINTERRUP) WHERE (TO_DATE(eve01m.FECINI) >= TO_DATE('"+ $P{fechaInicio}+"', 'dd/mm/yyyy') )   AND (TO_DATE(eve01m.FECFIN) <= TO_DATE('"+ $P{fechaFinal}+"', 'dd/mm/yyyy') )   AND (eve01m.reg IN ("+ $P{itemsSTR}+") OR "+ $P{cantidadItems}+" = 0) GROUP BY eve04m.CAPACIDAD_RETIRA ORDER BY eve04m.CAPACIDAD_RETIRA")]]></subreportParameterExpression>
				</subreportParameter>
				<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
				<subreportExpression><![CDATA[$P{SUBREPORT_DIR} + "SigeItrRepFusiblesInstaladosRetiradosTotales.jasper"]]></subreportExpression>
			</subreport>
		</band>
	</summary>
</jasperReport>
