<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="SigeItrRepFusiblesRetiradosSubregion" pageWidth="595" pageHeight="842" whenNoDataType="AllSectionsNoDetail" columnWidth="535" leftMargin="30" rightMargin="30" topMargin="20" bottomMargin="20" uuid="e9094b84-1ebf-4a27-a64b-ea628d945b9b">
	<property name="ireport.scriptlethandling" value="0"/>
	<property name="ireport.encoding" value="UTF-8"/>
	<property name="ireport.zoom" value="5.0"/>
	<property name="ireport.x" value="381"/>
	<property name="ireport.y" value="344"/>
	<import value="net.sf.jasperreports.engine.*"/>
	<import value="java.util.*"/>
	<import value="net.sf.jasperreports.engine.data.*"/>
	<parameter name="fechaInicio" class="java.lang.String"/>
	<parameter name="fechaFinal" class="java.lang.String"/>
	<parameter name="tipoFusible" class="java.lang.Integer" isForPrompting="false"/>
	<parameter name="subregion" class="java.lang.Integer" isForPrompting="false"/>
	<parameter name="itemsSTR" class="java.lang.String"/>
	<parameter name="cantidadItems" class="java.lang.Integer"/>
	<parameter name="SUBREPORT_DIR" class="java.lang.String">
		<defaultValueExpression><![CDATA[""]]></defaultValueExpression>
	</parameter>
	<parameter name="region" class="java.lang.Integer">
		<defaultValueExpression><![CDATA[new Integer(0)]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[SELECT
COUNT(eve01m.SUBREGION),
eve04m.TIPO_RETIRA,
eve04m.CAPACIDAD_RETIRA,
eve04c.NOM_SUBREGION,
eve01m.SUBREGION

FROM eve01m
INNER JOIN eve04c ON (eve01m.SUBREGION = eve04c.SUBREGION AND eve01m.REG = eve04c.REG)
INNER JOIN eve04m ON (eve01m.AA = eve04m.AA) AND (eve01m.COD_OFICINA = eve04m.COD_OFICINA) AND (eve01m.NUMINTERRUP = eve04m.NUMINTERRUP)

WHERE (TO_DATE(eve01m.FECINI) >= TO_DATE($P{fechaInicio}, 'dd/mm/yyyy') )
  AND (TO_DATE(eve01m.FECFIN) <= TO_DATE($P{fechaFinal}, 'dd/mm/yyyy') )
  AND (eve01m.REG = $P{region})
  AND (eve01m.SUBREGION IN ($P!{itemsSTR}) OR $P{cantidadItems} = 0)

GROUP BY eve01m.SUBREGION, eve04m.TIPO_RETIRA, eve04m.CAPACIDAD_RETIRA, eve04c.NOM_SUBREGION
ORDER BY eve01m.SUBREGION, eve04m.TIPO_RETIRA, eve04m.CAPACIDAD_RETIRA]]>
	</queryString>
	<field name="COUNT(EVE01M.SUBREGION)" class="java.math.BigDecimal"/>
	<field name="TIPO_RETIRA" class="java.math.BigDecimal"/>
	<field name="CAPACIDAD_RETIRA" class="java.math.BigDecimal"/>
	<field name="NOM_SUBREGION" class="java.lang.String"/>
	<field name="SUBREGION" class="java.math.BigDecimal"/>
	<group name="nivel">
		<groupExpression><![CDATA[new Integer($P{region}.intValue() + $F{SUBREGION}.intValue())]]></groupExpression>
		<groupHeader>
			<band height="36" splitType="Stretch">
				<textField isBlankWhenNull="false">
					<reportElement key="textField-19" x="0" y="22" width="265" height="13" uuid="5ffb7c6b-74e4-4d3a-83f6-fd51c3d0de64"/>
					<box>
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement>
						<font size="8" isBold="true" pdfFontName="Helvetica-Bold"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{SUBREGION} != null ?
"Subregion: " + $P{region} + " - " + $F{SUBREGION} + " " + $F{NOM_SUBREGION}
: "No hay información para generar el reporte"]]></textFieldExpression>
				</textField>
				<line direction="BottomUp">
					<reportElement key="line-1" x="174" y="35" width="361" height="1" uuid="f57ed4a7-8765-4fdb-91a9-65be46b21691"/>
				</line>
				<textField isBlankWhenNull="false">
					<reportElement key="textField-20" x="265" y="22" width="90" height="13" uuid="958605be-1646-4d7e-a4e4-adf2087fd9a8"/>
					<box>
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement>
						<font size="8" isBold="true" pdfFontName="Helvetica-Bold"/>
					</textElement>
					<textFieldExpression><![CDATA["Tipo "]]></textFieldExpression>
				</textField>
				<textField isBlankWhenNull="false">
					<reportElement key="textField-21" x="355" y="22" width="90" height="13" uuid="66177925-9045-43aa-9966-06cd8a98ad83"/>
					<box>
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement>
						<font size="8" isBold="true" pdfFontName="Helvetica-Bold"/>
					</textElement>
					<textFieldExpression><![CDATA["Capacidad "]]></textFieldExpression>
				</textField>
				<textField isBlankWhenNull="false">
					<reportElement key="textField-22" x="445" y="22" width="90" height="13" uuid="d9f64f3f-23d0-4e51-aca3-50d63786c26b"/>
					<box>
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement>
						<font size="8" isBold="true" pdfFontName="Helvetica-Bold"/>
					</textElement>
					<textFieldExpression><![CDATA["Cantidad "]]></textFieldExpression>
				</textField>
			</band>
		</groupHeader>
		<groupFooter>
			<band height="18" splitType="Stretch">
				<line direction="BottomUp">
					<reportElement key="line-2" x="174" y="3" width="361" height="1" uuid="4255eb3b-94a5-41f6-9798-0ef006f533cd"/>
				</line>
				<subreport isUsingCache="true">
					<reportElement key="subreport-1" x="0" y="4" width="535" height="14" uuid="5db32a78-d917-40e0-84d5-1b3ca3f6021c"/>
					<subreportParameter name="sql">
						<subreportParameterExpression><![CDATA[new String("SELECT COUNT(eve01m.SUBREGION) AS CONTADOR,eve04m.CAPACIDAD_RETIRA AS CAPACIDAD,eve01m.SUBREGION AS NIVELRED FROM eve01m INNER JOIN eve04m ON (eve01m.AA = eve04m.AA) AND (eve01m.COD_OFICINA = eve04m.COD_OFICINA) AND (eve01m.NUMINTERRUP = eve04m.NUMINTERRUP) WHERE (TO_DATE(eve01m.FECINI) >= TO_DATE('"+ $P{fechaInicio}+"', 'dd/mm/yyyy') )   AND (TO_DATE(eve01m.FECFIN) <= TO_DATE('"+ $P{fechaFinal}+"', 'dd/mm/yyyy') )  AND (eve01m.REG = "+ $P{region}+") AND (eve01m.subregion IN ("+ $F{SUBREGION}+") OR 1 = 0) GROUP BY eve01m.SUBREGION, eve04m.CAPACIDAD_RETIRA ORDER BY eve01m.SUBREGION, eve04m.CAPACIDAD_RETIRA")]]></subreportParameterExpression>
					</subreportParameter>
					<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
					<subreportExpression><![CDATA[$P{SUBREPORT_DIR} + "SigeItrRepFusiblesInstaladosRetiradosTotales.jasper"]]></subreportExpression>
				</subreport>
			</band>
		</groupFooter>
	</group>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band splitType="Stretch"/>
	</title>
	<pageHeader>
		<band height="36" splitType="Stretch">
			<textField pattern="" isBlankWhenNull="false">
				<reportElement key="textField-1" x="355" y="12" width="180" height="12" uuid="26448aa1-9b88-407f-a55e-ee4b43a8cfcf"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement>
					<font fontName="Arial" size="9" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<textFieldExpression><![CDATA["Fecha: "+new java.text.SimpleDateFormat("dd/MM/yyyy HH:mm").format(new java.util.Date())]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="false">
				<reportElement key="textField-2" x="355" y="0" width="90" height="12" uuid="41567b41-ad58-431d-96e5-fb0af2e49ade"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right">
					<font fontName="Arial" size="9" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<textFieldExpression><![CDATA["Página: "+$V{PAGE_NUMBER}+ " de "]]></textFieldExpression>
			</textField>
			<textField evaluationTime="Report" isBlankWhenNull="false">
				<reportElement key="textField-3" x="445" y="0" width="90" height="12" uuid="d1179363-0c95-4d10-993b-f924ec81366f"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Left">
					<font fontName="Arial" size="9" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="false">
				<reportElement key="textField-6" x="0" y="24" width="535" height="12" uuid="e2fc4a30-7330-4982-9696-17e42dab95b5"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center">
					<font fontName="Arial" size="9" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<textFieldExpression><![CDATA["Del: " + $P{fechaInicio} + " Al: " + $P{fechaFinal}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement key="staticText-1" x="0" y="0" width="130" height="12" uuid="9fa3b171-34d5-47fc-8bab-083f0b3e82cf"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement>
					<font fontName="Arial" size="9" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<text><![CDATA[ICE - UEN Servicio al Cliente]]></text>
			</staticText>
			<staticText>
				<reportElement key="staticText-3" x="0" y="12" width="130" height="12" uuid="3ae89e33-70ee-4966-8301-f05a2265f294"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement>
					<font fontName="Arial" size="9" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<text><![CDATA[]]></text>
			</staticText>
			<textField isBlankWhenNull="false">
				<reportElement key="textField-17" x="130" y="0" width="225" height="12" uuid="00cad93b-5975-4afa-9bc4-91bc860c126e"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center">
					<font size="9" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<textFieldExpression><![CDATA["Fusibles Retirados"]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="false">
				<reportElement key="textField-24" x="130" y="12" width="225" height="12" uuid="68152976-cf47-4906-8de1-7f0d0b728a05"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center">
					<font size="9" isBold="true" pdfFontName="Helvetica-Bold"/>
				</textElement>
				<textFieldExpression><![CDATA["A nivel de Subregión "]]></textFieldExpression>
			</textField>
		</band>
	</pageHeader>
	<columnHeader>
		<band splitType="Stretch"/>
	</columnHeader>
	<detail>
		<band height="16" splitType="Stretch">
			<textField pattern="##0" isBlankWhenNull="true">
				<reportElement key="textField" x="265" y="0" width="90" height="16" uuid="4f2eea32-73f7-43a3-8376-91fc5adf7b0b"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textFieldExpression><![CDATA[$F{TIPO_RETIRA}.intValue() == 0 ? "K" : ($F{TIPO_RETIRA}.intValue() == 1 ? "T" : ($F{TIPO_RETIRA}.intValue() == 2 ? "H" : ($F{TIPO_RETIRA}.intValue() == 3 ? "SF" : "LC")))]]></textFieldExpression>
			</textField>
			<textField pattern="##0" isBlankWhenNull="true">
				<reportElement key="textField" x="355" y="0" width="90" height="16" uuid="d142ac7f-165d-407b-a248-7e5766a23c64"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textFieldExpression><![CDATA[$F{CAPACIDAD_RETIRA}]]></textFieldExpression>
			</textField>
			<textField pattern="##0.00" isBlankWhenNull="true">
				<reportElement key="textField" x="445" y="0" width="90" height="16" uuid="78a224f2-2d8d-4c1e-8115-268afdf6e8c9"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textFieldExpression><![CDATA[$F{COUNT(EVE01M.SUBREGION)}.toString() + " c/u"]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<columnFooter>
		<band splitType="Stretch"/>
	</columnFooter>
	<pageFooter>
		<band splitType="Stretch"/>
	</pageFooter>
	<summary>
		<band height="20" splitType="Stretch">
			<subreport isUsingCache="true">
				<reportElement key="subreport-2" x="0" y="0" width="535" height="19" uuid="e8907e49-63a5-4d74-9595-bff9244dd07f"/>
				<subreportParameter name="sql">
					<subreportParameterExpression><![CDATA[new String("SELECT COUNT(*) AS CONTADOR,eve04m.CAPACIDAD_RETIRA AS CAPACIDAD, 1 AS NIVELRED FROM eve01m INNER JOIN eve04m ON (eve01m.AA = eve04m.AA) AND (eve01m.COD_OFICINA = eve04m.COD_OFICINA) AND (eve01m.NUMINTERRUP = eve04m.NUMINTERRUP) WHERE (TO_DATE(eve01m.FECINI) >= TO_DATE('"+ $P{fechaInicio}+"', 'dd/mm/yyyy') )  AND (TO_DATE(eve01m.FECFIN) <= TO_DATE('"+ $P{fechaFinal}+"', 'dd/mm/yyyy') )  AND (eve01m.REG = "+ $P{region}+") AND (eve01m.subregion IN ("+ $P{itemsSTR}+") OR "+ $P{cantidadItems}+" = 0) GROUP BY eve04m.CAPACIDAD_RETIRA ORDER BY eve04m.CAPACIDAD_RETIRA")]]></subreportParameterExpression>
				</subreportParameter>
				<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
				<subreportExpression><![CDATA[$P{SUBREPORT_DIR} + "SigeItrRepFusiblesInstaladosRetiradosTotales.jasper"]]></subreportExpression>
			</subreport>
		</band>
	</summary>
</jasperReport>
